<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Dynamique</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #4c8bf5, #5865f2);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }
        
        .container {
            width: 360px;
            height: 640px;
            background-color: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            position: relative;
        }
        
        .title-screen, .theme-screen, .question-screen, .result-screen, .summary-screen, .global-summary-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            transition: transform 0.5s ease;
        }
        
        .title-screen {
            justify-content: center;
            background: linear-gradient(135deg, #4c8bf5, #5865f2);
            z-index: 6;
        }
        
        .theme-screen {
            justify-content: flex-start;
            background: white;
            transform: translateX(100%);
            z-index: 5;
        }
        
        .question-screen {
            justify-content: space-between;
            background: white;
            transform: translateX(100%);
            z-index: 4;
        }
        
        .result-screen {
            justify-content: center;
            background: linear-gradient(135deg, #4c8bf5, #5865f2);
            transform: translateX(100%);
            z-index: 3;
        }
        
        .summary-screen {
            background: white;
            transform: translateX(100%);
            z-index: 2;
        }
        
        .global-summary-screen {
            background: white;
            transform: translateX(100%);
            z-index: 1;
        }
        
        .logo {
            font-size: 60px;
            font-weight: bold;
            color: white;
            text-shadow: 4px 4px 0px rgba(0, 0, 0, 0.2);
            letter-spacing: 2px;
            margin-bottom: 50px;
            text-align: center;
            line-height: 1;
        }
        
        .btn {
            background: white;
            color: #4c8bf5;
            border: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .btn.play {
            background: #ffca28;
            color: #333;
        }
        
        .theme-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 20px 0 30px;
        }
        
        .theme-cards {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-height: 70%;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .theme-card {
            background: linear-gradient(135deg, #4c8bf5, #5865f2);
            border-radius: 15px;
            color: white;
            padding: 15px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transform: scale(1);
            transition: all 0.3s;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .theme-card:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .theme-card img {
            width: 40px;
            height: 40px;
            margin-right: 15px;
            background: white;
            border-radius: 50%;
            padding: 8px;
        }
        
        .theme-card h3 {
            font-size: 16px;
            flex-grow: 1;
        }
        
        .theme-score {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 14px;
            margin-left: 10px;
        }
        
        .question-count {
            align-self: flex-start;
            font-size: 16px;
            color: #666;
            margin-bottom: 10px;
        }
        
        .question-text {
            font-size: 22px;
            font-weight: bold;
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
        }
        
        .option {
            background: white;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .option:hover {
            border-color: #4c8bf5;
            background: #f5f9ff;
        }
        
        .option.correct {
            background: #4caf50;
            color: white;
            border-color: #4caf50;
        }
        
        .option.incorrect {
            background: #f44336;
            color: white;
            border-color: #f44336;
        }
        
        .next-btn {
            background: #4c8bf5;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s;
        }
        
        .next-btn.show {
            opacity: 1;
            pointer-events: auto;
        }
        
        .result-title {
            font-size: 36px;
            font-weight: bold;
            color: white;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .player-name-display {
            font-size: 24px;
            color: white;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .shake {
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        .summary-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
            text-align: center;
        }
        
        .summary-list {
            width: 100%;
            margin-top: 20px;
            max-height: 70%;
            overflow-y: auto;
        }
        
        .summary-item {
            background: #f5f9ff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .summary-question {
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }
        
        .summary-answer {
            display: flex;
            align-items: center;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 5px;
        }
        
        .summary-answer.correct {
            background: rgba(76, 175, 80, 0.2);
        }
        
        .summary-answer.incorrect {
            background: rgba(244, 67, 54, 0.2);
        }
        
        .summary-answer-icon {
            margin-right: 10px;
            font-size: 18px;
        }
        
        .summary-answer-text {
            flex-grow: 1;
        }
        
        .back-btn {
            background: #4c8bf5;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        
        .buttons-container {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .score {
            font-size: 60px;
            font-weight: bold;
            color: #ffca28;
            margin-bottom: 20px;
        }
        
        .trophy {
            font-size: 80px;
            margin-bottom: 30px;
        }
        
        .confetti {
            position: absolute;
            width: 10px;
            height: 20px;
            background-color: #f44336;
            opacity: 0.8;
            animation: fall linear forwards;
        }
        
        @keyframes fall {
            to {
                transform: translateY(650px);
            }
        }
        
        /* Styles pour le r√©sum√© global */
        .global-summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 20px;
        }
        
        .global-summary-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin: 20px 0;
        }
        
        .theme-summary-card {
            background: #f5f9ff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .theme-summary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .theme-summary-title {
            font-weight: bold;
            color: #333;
            font-size: 18px;
        }
        
        .theme-summary-score {
            background: #4c8bf5;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-weight: bold;
        }
        
        .theme-summary-content {
            display: none;
            margin-top: 10px;
        }
        
        .theme-summary-card.expanded .theme-summary-content {
            display: block;
        }
        
        .expand-icon {
            cursor: pointer;
            user-select: none;
            margin-left: 10px;
        }
        
        .global-total-score {
            background: linear-gradient(135deg, #4c8bf5, #5865f2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        
        .global-total-score h3 {
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .global-total-score .score-value {
            font-size: 36px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- √âcran de titre -->
        <div class="title-screen">
            <div class="logo">QUIZ<br>CDG</div>
            <div class="name-input-container" style="margin-bottom: 30px; width: 80%;">
                <input type="text" id="player-name" placeholder="Entrez votre nom" 
                       style="width: 100%; padding: 12px 15px; border-radius: 25px; border: none; 
                              font-size: 16px; text-align: center; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
            </div>
            <button class="btn play" onclick="startQuiz()">JOUER</button>
            <div id="total-score" style="margin-top: 20px; color: white; font-size: 18px; display: none;"></div>
        </div>
        
        <!-- √âcran de s√©lection des th√®mes -->
        <div class="theme-screen">
            <h2 class="theme-title">Th√®mes CF</h2>
            <div id="screen-total-score" style="text-align: center; font-size: 16px; color: #333; margin-bottom: 15px; display: none;"></div>
            <button class="btn" onclick="showGlobalSummary()" style="margin-bottom: 15px;">R√©sum√© Global</button>
            <div class="theme-cards">
                <div class="theme-card" data-theme="Voyage de l'√©glise" style="background: linear-gradient(135deg, #4caf50, #2e7d32);">
                    <img src="/api/placeholder/80/80" alt="Voyage de l'√©glise">
                    <h3>Voyage de l'√©glise</h3>
                </div>
                <div class="theme-card" data-theme="Qui est Dieu?" style="background: linear-gradient(135deg, #3f51b5, #303f9f);">
                    <img src="/api/placeholder/80/80" alt="Qui est Dieu?">
                    <h3>Qui est Dieu?</h3>
                </div>
                <div class="theme-card" data-theme="√ätre dirig√© par Dieu" style="background: linear-gradient(135deg, #2196f3, #1565c0);">
                    <img src="/api/placeholder/80/80" alt="√ätre dirig√© par Dieu">
                    <h3>√ätre dirig√© par Dieu</h3>
                </div>
                <div class="theme-card" data-theme="Le Salut 1" style="background: linear-gradient(135deg, #ff9800, #f57c00);">
                    <img src="/api/placeholder/80/80" alt="Le Salut 1">
                    <h3>Le Salut 1</h3>
                </div>
                <div class="theme-card" data-theme="La Bible" style="background: linear-gradient(135deg, #f44336, #c62828);">
                    <img src="/api/placeholder/80/80" alt="La Bible">
                    <h3>La Bible</h3>
                </div>
                <div class="theme-card" data-theme="Ressources de la vie int√©rieure" style="background: linear-gradient(135deg, #9c27b0, #7b1fa2);">
                    <img src="/api/placeholder/80/80" alt="Ressources de la vie int√©rieure">
                    <h3>Ressources de la vie int√©rieure</h3>
                </div>
                <div class="theme-card" data-theme="Le Bapt√™me d'eau" style="background: linear-gradient(135deg, #00bcd4, #0097a7);">
                    <img src="/api/placeholder/80/80" alt="Le Bapt√™me d'eau">
                    <h3>Le Bapt√™me d'eau</h3>
                </div>
                <div class="theme-card" data-theme="Le Salut" style="background: linear-gradient(135deg, #607d8b, #455a64);">
                    <img src="/api/placeholder/80/80" alt="Le Salut">
                    <h3>Le Salut</h3>
                </div>
                <div class="theme-card" data-theme="L'importance de la communaut√©" style="background: linear-gradient(135deg, #e91e63, #c2185b);">
                    <img src="/api/placeholder/80/80" alt="L'importance de la communaut√©">
                    <h3>L'importance de la communaut√©</h3>
                </div>
                <div class="theme-card" data-theme="Le bapt√™me du Saint Esprit" style="background: linear-gradient(135deg, #673ab7, #512da8);">
                    <img src="/api/placeholder/80/80" alt="Le bapt√™me du Saint Esprit">
                    <h3>Le bapt√™me du Saint Esprit</h3>
                </div>
                <div class="theme-card" data-theme="Renouvellement des pens√©es" style="background: linear-gradient(135deg, #795548, #5d4037);">
                    <img src="/api/placeholder/80/80" alt="Renouvellement des pens√©es">
                    <h3>Renouvellement des pens√©es</h3>
                </div>
                <div class="theme-card" data-theme="La pri√®re" style="background: linear-gradient(135deg, #4c8bf5, #5865f2);">
                    <img src="/api/placeholder/80/80" alt="La pri√®re">
                    <h3>La pri√®re</h3>
                </div>
            </div>
        </div>
        
        <!-- √âcran de question -->
        <div class="question-screen">
            <div class="question-count">Question <span id="current-question">1</span> sur <span id="total-questions">2</span></div>
            <div class="question-text" id="question-text">Quelle est la capitale de la France?</div>
            <div class="options">
                <div class="option" onclick="selectOption(this, 0)">Paris</div>
                <div class="option" onclick="selectOption(this, 1)">Lyon</div>
                <div class="option" onclick="selectOption(this, 2)">Marseille</div>
                <div class="option" onclick="selectOption(this, 3)">Bordeaux</div>
            </div>
            <button class="next-btn" id="next-btn" onclick="nextQuestion()">Suivant</button>
        </div>
        
        <!-- √âcran de r√©sultat -->
        <div class="result-screen">
            <div class="trophy">üèÜ</div>
            <h2 class="result-title">F√©licitations!</h2>
            <div class="player-name-display" id="result-player-name">Joueur</div>
            <div class="score">4/4</div>
            <div class="buttons-container">
                <button class="btn" onclick="restartQuiz()">Rejouer</button>
                <button class="btn" onclick="showSummary()">Voir le r√©sum√©</button>
            </div>
        </div>
        
        <!-- √âcran de r√©sum√© -->
        <div class="summary-screen">
            <h2 class="summary-title">R√©sum√© des r√©ponses</h2>
            <div class="player-name-display" style="color: #333;" id="summary-player-name">Joueur</div>
            <div class="summary-list" id="summary-list">
                <!-- R√©sum√© des questions et r√©ponses g√©n√©r√© dynamiquement ici -->
            </div>
            <button class="back-btn" onclick="backToResults()">Retour</button>
        </div>
        
        <!-- √âcran de r√©sum√© global -->
        <div class="global-summary-screen">
            <div class="global-summary-header">
                <h2 class="global-summary-title">R√©sum√© Global</h2>
                <button class="btn" onclick="backToThemes()" style="padding: 10px 20px; font-size: 14px;">Retour</button>
            </div>
            <div class="player-name-display" style="color: #333; font-size: 20px;" id="global-summary-player-name">Joueur</div>
            
            <div class="global-total-score">
                <h3>Score Total</h3>
                <div class="score-value" id="global-total-score">0/0</div>
            </div>
            
            <div class="summary-list" id="global-summary-list">
                <!-- R√©sum√© global g√©n√©r√© dynamiquement ici -->
            </div>
        </div>
    </div>
    
    <script>
        // Donn√©es des questions avec les th√®mes du document
        const quizData = {
            'Voyage de l\'√©glise': [
                {
                    question: 'Dans quelle histoire de la bible est inspir√© la migration spirituelle de Martin Luther (protestant) √† Dr woodroffe (la r√©forme apostolique)?',
                    options: ['L\'histoire du d√©luge', 'L\'histoire des enfants d\'Isra√´l de l\'√âgypte √† la terre promise', 'L\'histoire de Mo√Øse', 'L\'histoire de David'],
                    correct: 1
                },
                {
                    question: 'Dans quel livre de la bible peut-on traquer les premiers d√©veloppement de l\'√©glise?',
                    options: ['√âvangile de Jean', 'Dans le livre des actes des ap√¥tres', '√âvangile de Matthieu', '√âp√Ætre aux Romains'],
                    correct: 1
                }
            ],
            'Qui est Dieu?': [
                {
                    question: 'Les √©critures affirment que Dieu est une personne, il est un √™tre et non une chose! Pourquoi ?',
                    options: ['Il parle', 'Il agit', 'Il pense', 'Toutes les r√©ponses'],
                    correct: 3
                },
                {
                    question: 'Peut-on affirmer que J√©sus est Dieu ?',
                    options: ['Oui, car il poss√®de les caract√©ristiques de Dieu', 'Non, il est seulement le fils de Dieu', 'Peut-√™tre', 'Ce n\'est pas clair'],
                    correct: 0
                }
            ],
            '√ätre dirig√© par Dieu': [
                {
                    question: 'Quelle attitude devons nous avoir pour √™tre vraiment dirig√© par Dieu ?',
                    options: ['S\'appuyer sur ses propres connaissances', 'Chercher activement Sa direction et d√©velopper sa relation avec Lui', 'Attendre passivement', 'Se d√©tourner des conseils divins'],
                    correct: 1
                },
                {
                    question: 'Comment Dieu nous parle-t-Il pour nous guider ?',
                    options: ['Uniquement par des visions', 'Par sa Parole et par le Saint Esprit', 'Uniquement apr√®s des je√ªnes', 'Par des predictions astrologiques'],
                    correct: 1
                }
            ],
            'Le Salut 1': [
                {
                    question: 'Que signifie le salut ?',
                    options: ['√ätre prot√©g√© contre les maladies', '√ätre b√©ni mat√©riellement', '√ätre transport√© de la mort √† la vie', '√ätre lib√©r√© de ses √©motions'],
                    correct: 2
                },
                {
                    question: 'Que se passe-t-il si un croyant p√®che apr√®s avoir √©t√© sauv√© ?',
                    options: ['Il perd automatiquement son salut', 'Il doit √™tre baptis√© de nouveau', 'Il est exclu de l\'√âglise', 'Il peut √™tre pardonn√© s\'il confesse son p√©ch√©'],
                    correct: 3
                }
            ],
            'La Bible': [
                {
                    question: 'La Bible est compos√©e de:',
                    options: ['50 livres', '66 livres', '70 livres', '80 livres'],
                    correct: 1
                },
                {
                    question: 'La Bible est divis√©e en:',
                    options: ['Ancien et Nouveau Testament', 'Ancien Testament seulement', 'Proph√®tes et √âcrits', '√âvangiles et √âp√Ætres'],
                    correct: 0
                }
            ],
            'Ressources de la vie int√©rieure': [
                {
                    question: 'Un style de vie bas√© sur la chair peut-il plaire √† Dieu ?',
                    options: ['Oui', 'Non', 'Parfois', 'Cela d√©pend'],
                    correct: 1
                },
                {
                    question: 'Le r√¥le du Saint-Esprit est de nous amener √† une place de:',
                    options: ['Richesse et de prosp√©rit√©', 'V√©rit√© et d\'authenticit√©', 'Sant√© et de bonheur', 'Protection physique'],
                    correct: 1
                }
            ],
            'Le Bapt√™me d\'eau': [
                {
                    question: 'Dans Marc 16:15-19, Christ met l\'accent sur deux aspects pour √™tre sauv√©s. L\'un est le bapt√™me d\'eau, quel est l\'autre ?',
                    options: ['Prier', 'Aimer son prochain', 'Croire', 'Servir'],
                    correct: 2
                },
                {
                    question: 'De quelle exp√©rience fait partie le Bapt√™me ?',
                    options: ['Apostolique', 'Communion fraternelle', 'Salut', 'Formation'],
                    correct: 2
                }
            ],
            'Le Salut': [
                {
                    question: 'Lorsque Adam a d√©sob√©i √† Dieu, la mort prit contr√¥le d\'abord de :',
                    options: ['Son √¢me', 'Son esprit', 'Son corps', 'Son intelligence'],
                    correct: 1
                },
                {
                    question: 'Choisissez la bonne combinaison pour le but du salut :',
                    options: ['D√©livrer et servir Dieu', 'D√©livrer et √™tre b√©ni', '√ätre gu√©ri et b√©ni', 'Prier et pr√™cher'],
                    correct: 0
                }
            ],
            'L\'importance de la communaut√©': [
                {
                    question: 'Pourquoi devrons-nous √™tre connect√©s √† une communaut√© pour vivre pleinement notre nouvelle vie en Christ ?',
                    options: ['Pour √™tre enseign√©s et grandir spirituellement', 'Pour √™tre divertis', 'Pour avoir des amis', 'Pour avoir un travail'],
                    correct: 0
                },
                {
                    question: 'Comment fonctionne le Centre de David ?',
                    options: ['Comme une √©glise traditionnelle', 'Sous un mandat proph√©tique et apostolique', 'Comme un centre de formation', 'Comme une ONG'],
                    correct: 1
                }
            ],
            'Le bapt√™me du Saint Esprit': [
                {
                    question: 'Quel √©v√®nement marque la premi√®re manifestation publique du Saint-Esprit sur les disciples ?',
                    options: ['Le bapt√™me de J√©sus-Christ', 'La crucifixion', 'La Pentec√¥te', 'L\'ascension de J√©sus-Christ'],
                    correct: 2
                },
                {
                    question: 'Comment Dieu pr√©f√®re-t-il l\'utilisation des dons spirituels en r√©union ?',
                    options: ['D√©sordre et parler en langue sans interpr√©tation', 'Pour instruire et √©difier tous', 'Seulement par des proph√©ties', 'Uniquement pour les leaders'],
                    correct: 1
                }
            ],
            'Renouvellement des pens√©es': [
                {
                    question: 'Quel homme porte le mieux le visage de cette bataille concernant le renouvellement des pens√©es dans l\'√âglise ?',
                    options: ['Pierre', 'Jean', 'Ap√¥tre Paul', 'Matthieu'],
                    correct: 2
                },
                {
                    question: '√Ä quoi notre syst√®me de pens√©es a-t-il √©t√© compar√© dans le cours ?',
                    options: ['Un champ de bataille', 'Un jardin', 'Une √©glise', 'Une forteresse'],
                    correct: 0
                }
            ],
            'La pri√®re': [
                {
                    question: 'Quel aspect de la pri√®re renforce notre relation avec Dieu ?',
                    options: ['La longueur de la pri√®re', 'La qualit√© de la relation et la sinc√©rit√©', 'Le nombre de r√©p√©titions', 'Le volume de la voix'],
                    correct: 1
                },
                {
                    question: 'Quelle est l\'importance de la pri√®re dans la vie chr√©tienne ?',
                    options: ['Optionnelle selon les besoins', 'Essentielle pour la relation avec Dieu', 'R√©serv√©e aux leaders', 'Pratique uniquement le dimanche'],
                    correct: 1
                }
            ]
        };
        
        let playerName = '';
        let currentTheme = '';
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedOption = null;
        let userAnswers = [];
        let themeScores = {}; // Pour stocker les scores de chaque th√®me
        let themeAnswers = {}; // Pour stocker toutes les r√©ponses pour chaque th√®me
        
        function showGlobalSummary() {
            // Afficher l'√©cran global
            document.querySelector('.theme-screen').style.transform = 'translateX(-100%)';
            document.querySelector('.global-summary-screen').style.transform = 'translateX(0)';
            
            // Afficher le nom du joueur
            document.getElementById('global-summary-player-name').textContent = playerName;
            
            // Calculer et afficher le score total
            let totalCorrect = 0;
            let totalQuestions = 0;
            
            Object.values(themeScores).forEach(score => {
                totalCorrect += score.score;
                totalQuestions += score.total;
            });
            
            document.getElementById('global-total-score').textContent = `${totalCorrect}/${totalQuestions}`;
            
            // G√©n√©rer le r√©sum√© complet
            const globalSummaryList = document.getElementById('global-summary-list');
            globalSummaryList.innerHTML = '';
            
            // Pour chaque th√®me qui a √©t√© jou√©
            Object.keys(themeAnswers).forEach(themeName => {
                const themeData = themeAnswers[themeName];
                
                const themeSummaryCard = document.createElement('div');
                themeSummaryCard.className = 'theme-summary-card';
                
                const themeSummaryHeader = document.createElement('div');
                themeSummaryHeader.className = 'theme-summary-header';
                
                const themeInfo = document.createElement('div');
                themeInfo.style.display = 'flex';
                themeInfo.style.alignItems = 'center';
                themeInfo.style.flex = '1';
                
                const themeSummaryTitle = document.createElement('div');
                themeSummaryTitle.className = 'theme-summary-title';
                themeSummaryTitle.textContent = themeName;
                
                const expandIcon = document.createElement('span');
                expandIcon.className = 'expand-icon';
                expandIcon.textContent = '‚ñº';
                expandIcon.onclick = function() {
                    themeSummaryCard.classList.toggle('expanded');
                    expandIcon.textContent = themeSummaryCard.classList.contains('expanded') ? '‚ñ≤' : '‚ñº';
                };
                
                const themeSummaryScore = document.createElement('div');
                themeSummaryScore.className = 'theme-summary-score';
                const themeScore = themeScores[themeName];
                themeSummaryScore.textContent = `${themeScore.score}/${themeScore.total}`;
                
                themeInfo.appendChild(themeSummaryTitle);
                themeInfo.appendChild(expandIcon);
                themeSummaryHeader.appendChild(themeInfo);
                themeSummaryHeader.appendChild(themeSummaryScore);
                
                const themeSummaryContent = document.createElement('div');
                themeSummaryContent.className = 'theme-summary-content';
                
                // Ajouter les r√©ponses pour ce th√®me
                themeData.forEach((answer, index) => {
                    const summaryItem = document.createElement('div');
                    summaryItem.className = 'summary-item';
                    summaryItem.style.marginBottom = '15px';
                    
                    const questionEl = document.createElement('div');
                    questionEl.className = 'summary-question';
                    questionEl.textContent = `Question ${index + 1}: ${answer.question}`;
                    
                    const userAnswerEl = document.createElement('div');
                    userAnswerEl.className = answer.isCorrect ? 'summary-answer correct' : 'summary-answer incorrect';
                    
                    const iconEl = document.createElement('span');
                    iconEl.className = 'summary-answer-icon';
                    iconEl.textContent = answer.isCorrect ? '‚úÖ' : '‚ùå';
                    
                    const textEl = document.createElement('span');
                    textEl.className = 'summary-answer-text';
                    textEl.textContent = `Votre r√©ponse: ${answer.userAnswer}`;
                    
                    userAnswerEl.appendChild(iconEl);
                    userAnswerEl.appendChild(textEl);
                    
                    summaryItem.appendChild(questionEl);
                    summaryItem.appendChild(userAnswerEl);
                    
                    if (!answer.isCorrect) {
                        const correctAnswerEl = document.createElement('div');
                        correctAnswerEl.className = 'summary-answer correct';
                        
                        const correctIconEl = document.createElement('span');
                        correctIconEl.className = 'summary-answer-icon';
                        correctIconEl.textContent = '‚úì';
                        
                        const correctTextEl = document.createElement('span');
                        correctTextEl.className = 'summary-answer-text';
                        correctTextEl.textContent = `R√©ponse correcte: ${answer.correctAnswer}`;
                        
                        correctAnswerEl.appendChild(correctIconEl);
                        correctAnswerEl.appendChild(correctTextEl);
                        
                        summaryItem.appendChild(correctAnswerEl);
                    }
                    
                    themeSummaryContent.appendChild(summaryItem);
                });
                
                themeSummaryCard.appendChild(themeSummaryHeader);
                themeSummaryCard.appendChild(themeSummaryContent);
                globalSummaryList.appendChild(themeSummaryCard);
            });
        }
        
        function backToThemes() {
            document.querySelector('.global-summary-screen').style.transform = 'translateX(100%)';
            document.querySelector('.theme-screen').style.transform = 'translateX(0)';
        }
        
        function updateThemeScores() {
            const themeCards = document.querySelectorAll('.theme-card');
            themeCards.forEach(card => {
                // Utiliser l'attribut data-theme pour r√©cup√©rer le nom exact du th√®me
                const themeName = card.getAttribute('data-theme');
                
                // V√©rifier si ce th√®me a un score
                if (themeScores[themeName]) {
                    // V√©rifier si un score est d√©j√† affich√©
                    let scoreDisplay = card.querySelector('.theme-score');
                    if (!scoreDisplay) {
                        scoreDisplay = document.createElement('span');
                        scoreDisplay.className = 'theme-score';
                        card.appendChild(scoreDisplay);
                    }
                    const themeData = themeScores[themeName];
                    scoreDisplay.textContent = `${themeData.score}/${themeData.total}`;
                }
            });
            
            // Mettre √† jour la note totale sur l'√©cran des th√®mes
            let totalCorrect = 0;
            let totalQuestions = 0;
            
            Object.values(themeScores).forEach(score => {
                totalCorrect += score.score;
                totalQuestions += score.total;
            });
            
            const screenTotalScore = document.getElementById('screen-total-score');
            if (totalQuestions > 0) {
                screenTotalScore.textContent = `Note totale: ${totalCorrect}/${totalQuestions}`;
                screenTotalScore.style.display = 'block';
            } else {
                screenTotalScore.style.display = 'none';
            }
        }
        
        function updateTotalScore() {
            let totalCorrect = 0;
            let totalQuestions = 0;
            
            Object.values(themeScores).forEach(score => {
                totalCorrect += score.score;
                totalQuestions += score.total;
            });
            
            const totalScoreDisplay = document.getElementById('total-score');
            if (totalQuestions > 0) {
                totalScoreDisplay.textContent = `Note totale: ${totalCorrect}/${totalQuestions}`;
                totalScoreDisplay.style.display = 'block';
            } else {
                totalScoreDisplay.style.display = 'none';
            }
        }
        
        function initThemeButtons() {
            const themeCards = document.querySelectorAll('.theme-card');
            themeCards.forEach(card => {
                const themeName = card.getAttribute('data-theme');
                card.onclick = function() {
                    selectTheme(themeName);
                };
            });
        }
        
        function startQuiz() {
            playerName = document.getElementById('player-name').value.trim();
            if (!playerName) {
                // Ajouter un effet de secousse √† l'input si le nom est vide
                const nameInput = document.getElementById('player-name');
                nameInput.style.border = '2px solid #f44336';
                nameInput.classList.add('shake');
                setTimeout(() => {
                    nameInput.classList.remove('shake');
                }, 500);
                return;
            }
            
            // Afficher la note totale
            updateTotalScore();
            
            document.querySelector('.title-screen').style.transform = 'translateX(-100%)';
            document.querySelector('.theme-screen').style.transform = 'translateX(0)';
            
            // Initialiser les boutons de th√®me
            initThemeButtons();
            
            // Mettre √† jour l'affichage des scores sur les cartes
            updateThemeScores();
        }
        
        function selectTheme(theme) {
            currentTheme = theme;
            currentQuestionIndex = 0;
            score = 0;
            userAnswers = []; // R√©initialiser les r√©ponses utilisateur
            
            loadQuestion();
            
            document.querySelector('.theme-screen').style.transform = 'translateX(-100%)';
            document.querySelector('.question-screen').style.transform = 'translateX(0)';
        }
        
        function loadQuestion() {
            const questionData = quizData[currentTheme][currentQuestionIndex];
            document.getElementById('current-question').textContent = currentQuestionIndex + 1;
            document.getElementById('total-questions').textContent = quizData[currentTheme].length;
            document.getElementById('question-text').textContent = questionData.question;
            
            const options = document.querySelectorAll('.option');
            options.forEach((option, index) => {
                option.textContent = questionData.options[index];
                option.classList.remove('correct', 'incorrect');
            });
            
            document.getElementById('next-btn').classList.remove('show');
            selectedOption = null;
        }
        
        function selectOption(element, optionIndex) {
            if (selectedOption !== null) return;
            
            selectedOption = optionIndex;
            const correctIndex = quizData[currentTheme][currentQuestionIndex].correct;
            
            // Enregistrer la r√©ponse de l'utilisateur
            userAnswers.push({
                question: quizData[currentTheme][currentQuestionIndex].question,
                userAnswer: quizData[currentTheme][currentQuestionIndex].options[optionIndex],
                correctAnswer: quizData[currentTheme][currentQuestionIndex].options[correctIndex],
                isCorrect: optionIndex === correctIndex
            });
            
            if (optionIndex === correctIndex) {
                element.classList.add('correct');
                score++;
            } else {
                element.classList.add('incorrect');
                document.querySelectorAll('.option')[correctIndex].classList.add('correct');
            }
            
            document.getElementById('next-btn').classList.add('show');
        }
        
        function nextQuestion() {
            currentQuestionIndex++;
            
            if (currentQuestionIndex < quizData[currentTheme].length) {
                loadQuestion();
            } else {
                showResult();
            }
        }
        
        function showResult() {
            document.querySelector('.question-screen').style.transform = 'translateX(-100%)';
            document.querySelector('.result-screen').style.transform = 'translateX(0)';
            
            // Afficher le nom du joueur
            document.getElementById('result-player-name').textContent = playerName;
            
            // Sauvegarder le score pour ce th√®me
            themeScores[currentTheme] = {
                score: score,
                total: quizData[currentTheme].length
            };
            
            // Sauvegarder les r√©ponses pour ce th√®me (pour le r√©sum√© global)
            themeAnswers[currentTheme] = userAnswers.slice();

            // Envoi des r√©sultats √† la base de donn√©es
            sendResultsToServer(currentTheme, score, quizData[currentTheme].length, userAnswers);

            
            document.querySelector('.score').textContent = score + '/' + quizData[currentTheme].length;
            
            // Pr√©parer le r√©sum√© des r√©sultats (bien que cach√© pour l'instant)
            document.getElementById('summary-player-name').textContent = playerName;
            
            // Cr√©er les confettis pour la c√©l√©bration
            createConfetti();
        }
        
        function showSummary() {
            // G√©n√©rer le r√©sum√© des r√©ponses
            const summaryList = document.getElementById('summary-list');
            summaryList.innerHTML = '';
            
            userAnswers.forEach((answer, index) => {
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item';
                
                const questionEl = document.createElement('div');
                questionEl.className = 'summary-question';
                questionEl.textContent = `Question ${index + 1}: ${answer.question}`;
                
                const userAnswerEl = document.createElement('div');
                userAnswerEl.className = answer.isCorrect ? 'summary-answer correct' : 'summary-answer incorrect';
                
                const iconEl = document.createElement('span');
                iconEl.className = 'summary-answer-icon';
                iconEl.textContent = answer.isCorrect ? '‚úÖ' : '‚ùå';
                
                const textEl = document.createElement('span');
                textEl.className = 'summary-answer-text';
                textEl.textContent = `Votre r√©ponse: ${answer.userAnswer}`;
                
                userAnswerEl.appendChild(iconEl);
                userAnswerEl.appendChild(textEl);
                
                summaryItem.appendChild(questionEl);
                summaryItem.appendChild(userAnswerEl);
                
                if (!answer.isCorrect) {
                    const correctAnswerEl = document.createElement('div');
                    correctAnswerEl.className = 'summary-answer correct';
                    
                    const correctIconEl = document.createElement('span');
                    correctIconEl.className = 'summary-answer-icon';
                    correctIconEl.textContent = '‚úì';
                    
                    const correctTextEl = document.createElement('span');
                    correctTextEl.className = 'summary-answer-text';
                    correctTextEl.textContent = `R√©ponse correcte: ${answer.correctAnswer}`;
                    
                    correctAnswerEl.appendChild(correctIconEl);
                    correctAnswerEl.appendChild(correctTextEl);
                    
                    summaryItem.appendChild(correctAnswerEl);
                }
                
                summaryList.appendChild(summaryItem);
            });
            
            // Afficher l'√©cran de r√©sum√©
            document.querySelector('.result-screen').style.transform = 'translateX(-100%)';
            document.querySelector('.summary-screen').style.transform = 'translateX(0)';
        }
        
        function backToResults() {
            // Retourner √† l'√©cran de r√©sultat
            document.querySelector('.summary-screen').style.transform = 'translateX(100%)';
            document.querySelector('.result-screen').style.transform = 'translateX(0)';
        }
        
        function createConfetti() {
            const colors = ['#f44336', '#2196f3', '#ffeb3b', '#4caf50', '#9c27b0'];
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 360 + 'px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = Math.random() * 20 + 10 + 'px';
                confetti.style.animationDuration = Math.random() * 3 + 2 + 's';
                confetti.style.animationDelay = Math.random() * 5 + 's';
                
                document.querySelector('.result-screen').appendChild(confetti);
            }
        }
        
        function restartQuiz() {
            // Supprimer les confettis
            document.querySelectorAll('.confetti').forEach(confetti => confetti.remove());
            
            // R√©initialiser les donn√©es du quiz
            userAnswers = [];
            
            document.querySelector('.result-screen').style.transform = 'translateX(100%)';
            document.querySelector('.summary-screen').style.transform = 'translateX(100%)';
            document.querySelector('.theme-screen').style.transform = 'translateX(0)';
            
            // Initialiser les boutons de th√®me et mettre √† jour l'affichage des scores
            initThemeButtons();
            updateThemeScores();
        }

        function sendResultsToServer(theme, score, total, answers) {
    fetch('http://localhost:3000/api/save-results', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json'
        },
        body: JSON.stringify({
            player: playerName,
            theme: theme,
            score: score,
            total: total,
            answers: answers
        })
    })
    .then(res => res.json())
    .then(data => console.log("Donn√©es enregistr√©es :", data))
    .catch(error => console.error("Erreur d'envoi :", error));
}

    </script>
</body>
</html>